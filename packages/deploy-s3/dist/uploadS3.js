import{lstatSync,readdirSync,readFileSync}from'fs';import path from'path';import mime from'mime-types';var isDir=function(dir){return lstatSync(dir).isDirectory()};export function uploadS3Files(fileName,dir,AWS_S3_BUCKET,buildStructure){readdirSync(fileName).map(function(pb){var pubDir=path.join(fileName,pb);if(isDir(pubDir)){uploadS3Files(path.join(pubDir),'out',AWS_S3_BUCKET,buildStructure)}else{var allFiles=readFileSync(pubDir,'utf8');var mainDir=pubDir.match(dir);var bucketS3Path=pubDir.substring(mainDir.index).replace("".concat(mainDir[0],"/"),'');buildStructure.push({Bucket:AWS_S3_BUCKET,Key:"".concat(bucketS3Path),Body:allFiles,ContentType:mime.lookup(bucketS3Path)})}});return buildStructure}