import{lstatSync,readdirSync,readFileSync}from'fs';import path from'path';import mime from'mime-types';var isDir=function(dir){return lstatSync(dir).isDirectory()};export function uploadS3Files(fileName,dir,AWS_S3_BUCKET){var buildStructure=[];readdirSync(fileName).map(function(pb,j){var pubDir=path.join(fileName,pb);if(isDir(pubDir)){uploadS3Files(path.join(pubDir),dir,AWS_S3_BUCKET)}else{try{var allFiles=readFileSync(pubDir,'utf8');var mainDir=pubDir.match(dir);var bucketS3Path=pubDir.substring(mainDir.index).replace("".concat(mainDir[0],"/"),'');buildStructure.push({Bucket:AWS_S3_BUCKET,Key:"".concat(bucketS3Path),Body:allFiles,ContentType:mime.lookup(bucketS3Path)})}catch(e){console.error("Error reading file, process terminated (Reason): ".concat(e));throw e}}});return buildStructure}